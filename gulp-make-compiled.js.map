{"version":3,"sources":["gulp-make.js"],"names":[],"mappings":";;AAAA;;;AAGA,IAAI,WAAW,QAAQ,WAAR,CAAf;AACA,IAAI,SAAS,QAAQ,aAAR,CAAb;AACA,IAAI,SAAS,QAAQ,aAAR,CAAb;AACA,IAAI,SAAS,QAAQ,QAAR,CAAb;AACA,IAAI,aAAa,QAAQ,aAAR,CAAjB;AACA,IAAI,SAAS,QAAQ,aAAR,EAAuB,IAApC;AACA,IAAI,OAAO,QAAQ,MAAR,CAAX;;AAEA,IAAI,0BAA0B,SAAS,IAAT,EAAe,QAAf,CAA9B;AACA;;;AAGA,SAAS,eAAT,CAAyB,IAAzB,EAA+B;AAC7B,MAAI,OAAO,IAAX;AACA,MAAI,KAAK,IAAL,CAAU,KAAV,CAAgB,OAAhB,CAAJ,EAA8B;AAC5B,QAAI,UAAU,KAAK,IAAL,CAAU,OAAV,CAAkB,KAAlB,EAAyB,SAAzB,CAAd;AACA,WAAO,CAAC,OAAO,OAAP,CAAR;AAED,GAJD,MAIO,IAAI,KAAK,IAAL,CAAU,KAAV,CAAgB,QAAhB,CAAJ,EAA+B;AACpC,QAAI,UAAU,KAAK,IAAL,CAAU,OAAV,CAAkB,MAAlB,EAA0B,UAA1B,CAAd;AACA,WAAO,CAAC,OAAO,OAAP,CAAR;AACD;AACD;AACA,SAAO,IAAP;AACD;;AAED;AACA,KAAK,IAAL,CAAU,gBAAV,EAA4B,YAAK;AAC/B;AACA,OAAK,GAAL,CAAS,SAAS,IAAT,EAAe,QAAf,EAAyB,QAAlC,EAA4C,EAAC,MAAM,2BAAP,EAA5C,EACG,IADH,CACQ,KAAK,IAAL,CAAU,mBAAV,CADR;;AAGA,OAAK,GAAL,CAAS,SAAS,KAAT,EAAgB,SAAhB,EAA2B,QAApC,EAA8C,EAAC,MAAM,2BAAP,EAA9C,EACG,IADH,CACQ,KAAK,IAAL,CAAU,mBAAV,CADR;;AAGA;AACA;AACA,OAAK,GAAL,CAAS,gBAAT,EAA2B,EAAC,MAAM,2BAAP,EAA3B,EACG,IADH,CACQ,WAAW,OAAX,CAAmB,eAAnB,CADR,EAEG,IAFH,CAEQ,KAAK,IAAL,CAAU,mBAAV,CAFR;AAGD,CAbD;;AAeA,KAAK,IAAL,CAAU,0BAAV,EAAsC,YAAK;AACzC,SAAO,KAAK,GAAL,CAAS,wBAAwB,MAAjC,EACJ,IADI,CACC,OAAO,mBAAP,CADD,EAEJ,IAFI,CAEC,KAAK,IAAL,CAAU,KAAV,CAFD,CAAP;AAGD,CAJD;;AAMA,KAAK,IAAL,CAAU,yBAAV,EAAqC,YAAK;AACxC,SAAO,OACL,KAAK,GAAL,CAAS,wBAAwB,QAAjC,CADK,EAEL,KAAK,GAAL,CAAS,wBAAwB,gBAAjC,EACG,IADH,CACQ,OAAO,YAAP,CADR,EAEG,IAFH,CAEQ,QAFR,CAFK,EAMJ,IANI,CAMC,OAAO,uBAAP,CAND,EAOJ,IAPI,CAOC,KAAK,IAAL,CAAU,MAAV,CAPD,CAAP;AAQD,CATD;;AAWA;AACA,KAAK,IAAL,CAAU,SAAV,EAAqB,YAAY;AAC/B,SAAO,KAAK,GAAL,CAAS,SAAT,EACJ,IADI,CACC,OAAO,SAAP,CADD,EAEJ,IAFI,CAEC,KAAK,IAAL,CAAU,SAAV,CAFD,CAAP;AAGD,CAJD;AAKA;AACA,KAAK,IAAL,CAAU,SAAV,EAAqB,CAAC,SAAD,CAArB","file":"gulp-make-compiled.js","sourcesContent":["/**\n * Created by hesk on 16年12月7日.\n */\nvar bowerMin = require('bower-min');\nvar concat = require('gulp-concat');\nvar uglify = require('gulp-uglify');\nvar merge2 = require('merge2');\nvar gulpIgnore = require('gulp-ignore');\nvar exists = require('path-exists').sync;\nvar gulp = require('gulp');\n\nvar bowerMinJavaScriptFiles = bowerMin('js', 'min.js');\n/*\n * A function that checks whether a Bower file has a minified version.\n */\nfunction keepNonMinified(file) {\n  var keep = true;\n  if (file.path.match('\\.js$')) {\n    var minPath = file.path.replace('.js', '.min.js');\n    keep = !exists(minPath);\n\n  } else if (file.path.match('\\.css$')) {\n    var minPath = file.path.replace('.css', '.min.css');\n    keep = !exists(minPath);\n  }\n  // gutil.log( file.path + ' => ' + keep );\n  return keep;\n}\n\n// Create some task\ngulp.task('copy-bower-dep', ()=> {\n  // Copy minified resources (Bower)\n  gulp.src(bowermin('js', 'min.js').minified, {base: './my-bower-components/dir'})\n    .pipe(gulp.dest('./target/dist/lib'));\n\n  gulp.src(bowermin('css', 'min.css').minified, {base: './my-bower-components/dir'})\n    .pipe(gulp.dest('./target/dist/lib'));\n\n  // Copy non-minified resources (Bower)\n  // Notice we filter these resources to distinguish which one are minified.\n  gulp.src(mainBowerFiles(), {base: './my-bower-components/dir'})\n    .pipe(gulpIgnore.include(keepNonMinified))\n    .pipe(gulp.dest('./target/dist/lib'));\n});\n\ngulp.task('vendorScriptsDevelopment', ()=> {\n  return gulp.src(bowerMinJavaScriptFiles.normal)\n    .pipe(concat('vendor-scripts.js'))\n    .pipe(gulp.dest('dev'))\n});\n\ngulp.task('vendorScriptsProduction', ()=> {\n  return merge2(\n    gulp.src(bowerMinJavaScriptFiles.minified),\n    gulp.src(bowerMinJavaScriptFiles.minifiedNotFound)\n      .pipe(concat('tmp.min.js'))\n      .pipe(uglify())\n  )\n    .pipe(concat('vendor-scripts.min.js'))\n    .pipe(gulp.dest('dist'))\n});\n\n// Concatenate JS Files\ngulp.task('scripts', function () {\n  return gulp.src('js/*.js')\n    .pipe(concat('main.js'))\n    .pipe(gulp.dest('dist/js'));\n});\n// Default Task\ngulp.task('default', ['scripts']);\n"]}