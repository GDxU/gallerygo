{"version":3,"sources":["bottomSheet.js"],"names":[],"mappings":"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","file":"bottomSheet-compiled.js","sourcesContent":["/*!\n * Angular Material Design\n * https://github.com/angular/material\n * @license MIT\n * v1.1.1-master-f7ecb4f\n */\n(function( window, angular, undefined ){\n\"use strict\";\n\n/**\n * @ngdoc module\n * @name material.components.bottomSheet\n * @description\n * BottomSheet\n */\nMdBottomSheetDirective['$inject'] = [\"$mdBottomSheet\"];\nMdBottomSheetProvider['$inject'] = [\"$$interimElementProvider\"];\nangular\n  .module('material.components.bottomSheet', [\n    'material.core',\n    'material.components.backdrop'\n  ])\n  .directive('mdBottomSheet', MdBottomSheetDirective)\n  .provider('$mdBottomSheet', MdBottomSheetProvider);\n\n/* ngInject */\nfunction MdBottomSheetDirective($mdBottomSheet) {\n  return {\n    restrict: 'E',\n    link : function postLink(scope, element) {\n      element.addClass('_md');     // private md component indicator for styling\n\n      // When navigation force destroys an interimElement, then\n      // listen and $destroy() that interim instance...\n      scope.$on('$destroy', function() {\n        $mdBottomSheet.destroy();\n      });\n    }\n  };\n}\n\n\n/**\n * @ngdoc service\n * @name $mdBottomSheet\n * @module material.components.bottomSheet\n *\n * @description\n * `$mdBottomSheet` opens a bottom sheet over the app and provides a simple promise API.\n *\n * ## Restrictions\n *\n * - The bottom sheet's template must have an outer `<md-bottom-sheet>` element.\n * - Add the `md-grid` class to the bottom sheet for a grid layout.\n * - Add the `md-list` class to the bottom sheet for a list layout.\n *\n * @usage\n * <hljs lang=\"html\">\n * <div ng-controller=\"MyController\">\n *   <md-button ng-click=\"openBottomSheet()\">\n *     Open a Bottom Sheet!\n *   </md-button>\n * </div>\n * </hljs>\n * <hljs lang=\"js\">\n * var app = angular.module('app', ['ngMaterial']);\n * app.controller('MyController', function($scope, $mdBottomSheet) {\n *   $scope.openBottomSheet = function() {\n *     $mdBottomSheet.show({\n *       template: '<md-bottom-sheet>Hello!</md-bottom-sheet>'\n *     });\n *   };\n * });\n * </hljs>\n */\n\n /**\n * @ngdoc method\n * @name $mdBottomSheet#show\n *\n * @description\n * Show a bottom sheet with the specified options.\n *\n * @param {object} options An options object, with the following properties:\n *\n *   - `templateUrl` - `{string=}`: The url of an html template file that will\n *   be used as the content of the bottom sheet. Restrictions: the template must\n *   have an outer `md-bottom-sheet` element.\n *   - `template` - `{string=}`: Same as templateUrl, except this is an actual\n *   template string.\n *   - `scope` - `{object=}`: the scope to link the template / controller to. If none is specified, it will create a new child scope.\n *     This scope will be destroyed when the bottom sheet is removed unless `preserveScope` is set to true.\n *   - `preserveScope` - `{boolean=}`: whether to preserve the scope when the element is removed. Default is false\n *   - `controller` - `{string=}`: The controller to associate with this bottom sheet.\n *   - `locals` - `{string=}`: An object containing key/value pairs. The keys will\n *   be used as names of values to inject into the controller. For example,\n *   `locals: {three: 3}` would inject `three` into the controller with the value\n *   of 3.\n *   - `clickOutsideToClose` - `{boolean=}`: Whether the user can click outside the bottom sheet to\n *     close it. Default true.\n *   - `bindToController` - `{boolean=}`: When set to true, the locals will be bound to the controller instance.\n *   - `disableBackdrop` - `{boolean=}`: When set to true, the bottomsheet will not show a backdrop.\n *   - `escapeToClose` - `{boolean=}`: Whether the user can press escape to close the bottom sheet.\n *     Default true.\n *   - `resolve` - `{object=}`: Similar to locals, except it takes promises as values\n *   and the bottom sheet will not open until the promises resolve.\n *   - `controllerAs` - `{string=}`: An alias to assign the controller to on the scope.\n *   - `parent` - `{element=}`: The element to append the bottom sheet to. The `parent` may be a `function`, `string`,\n *   `object`, or null. Defaults to appending to the body of the root element (or the root element) of the application.\n *   e.g. angular.element(document.getElementById('content')) or \"#content\"\n *   - `disableParentScroll` - `{boolean=}`: Whether to disable scrolling while the bottom sheet is open.\n *     Default true.\n *\n * @returns {promise} A promise that can be resolved with `$mdBottomSheet.hide()` or\n * rejected with `$mdBottomSheet.cancel()`.\n */\n\n/**\n * @ngdoc method\n * @name $mdBottomSheet#hide\n *\n * @description\n * Hide the existing bottom sheet and resolve the promise returned from\n * `$mdBottomSheet.show()`. This call will close the most recently opened/current bottomsheet (if any).\n *\n * @param {*=} response An argument for the resolved promise.\n *\n */\n\n/**\n * @ngdoc method\n * @name $mdBottomSheet#cancel\n *\n * @description\n * Hide the existing bottom sheet and reject the promise returned from\n * `$mdBottomSheet.show()`.\n *\n * @param {*=} response An argument for the rejected promise.\n *\n */\n\nfunction MdBottomSheetProvider($$interimElementProvider) {\n  // how fast we need to flick down to close the sheet, pixels/ms\n  bottomSheetDefaults['$inject'] = [\"$animate\", \"$mdConstant\", \"$mdUtil\", \"$mdTheming\", \"$mdBottomSheet\", \"$rootElement\", \"$mdGesture\", \"$log\"];\n  var CLOSING_VELOCITY = 0.5;\n  var PADDING = 80; // same as css\n\n  return $$interimElementProvider('$mdBottomSheet')\n    .setDefaults({\n      methods: ['disableParentScroll', 'escapeToClose', 'clickOutsideToClose'],\n      options: bottomSheetDefaults\n    });\n\n  /* ngInject */\n  function bottomSheetDefaults($animate, $mdConstant, $mdUtil, $mdTheming, $mdBottomSheet, $rootElement,\n                               $mdGesture, $log) {\n    var backdrop;\n\n    return {\n      themable: true,\n      onShow: onShow,\n      onRemove: onRemove,\n      disableBackdrop: false,\n      escapeToClose: true,\n      clickOutsideToClose: true,\n      disableParentScroll: true\n    };\n\n\n    function onShow(scope, element, options, controller) {\n\n      element = $mdUtil.extractElementByName(element, 'md-bottom-sheet');\n\n      // prevent tab focus or click focus on the bottom-sheet container\n      element.attr('tabindex',\"-1\");\n\n      // Once the md-bottom-sheet has `ng-cloak` applied on his template the opening animation will not work properly.\n      // This is a very common problem, so we have to notify the developer about this.\n      if (element.hasClass('ng-cloak')) {\n        var message = '$mdBottomSheet: using `<md-bottom-sheet ng-cloak >` will affect the bottom-sheet opening animations.';\n        $log.warn( message, element[0] );\n      }\n\n      if (!options.disableBackdrop) {\n        // Add a backdrop that will close on click\n        backdrop = $mdUtil.createBackdrop(scope, \"md-bottom-sheet-backdrop md-opaque\");\n\n        // Prevent mouse focus on backdrop; ONLY programatic focus allowed.\n        // This allows clicks on backdrop to propogate to the $rootElement and\n        // ESC key events to be detected properly.\n        \n        backdrop[0].tabIndex = -1;\n\n        if (options.clickOutsideToClose) {\n          backdrop.on('click', function() {\n            $mdUtil.nextTick($mdBottomSheet.cancel,true);\n          });\n        }\n\n        $mdTheming.inherit(backdrop, options.parent);\n\n        $animate.enter(backdrop, options.parent, null);\n      }\n\n      var bottomSheet = new BottomSheet(element, options.parent);\n      options.bottomSheet = bottomSheet;\n\n      $mdTheming.inherit(bottomSheet.element, options.parent);\n\n      if (options.disableParentScroll) {\n        options.restoreScroll = $mdUtil.disableScrollAround(bottomSheet.element, options.parent);\n      }\n\n      return $animate.enter(bottomSheet.element, options.parent, backdrop)\n        .then(function() {\n          var focusable = $mdUtil.findFocusTarget(element) || angular.element(\n            element[0].querySelector('button') ||\n            element[0].querySelector('a') ||\n            element[0].querySelector($mdUtil.prefixer('ng-click', true))\n          ) || backdrop;\n\n          if (options.escapeToClose) {\n            options.rootElementKeyupCallback = function(e) {\n              if (e.keyCode === $mdConstant.KEY_CODE.ESCAPE) {\n                $mdUtil.nextTick($mdBottomSheet.cancel,true);\n              }\n            };\n\n            $rootElement.on('keyup', options.rootElementKeyupCallback);\n            focusable && focusable.focus();\n          }\n        });\n\n    }\n\n    function onRemove(scope, element, options) {\n\n      var bottomSheet = options.bottomSheet;\n\n      if (!options.disableBackdrop) $animate.leave(backdrop);\n      return $animate.leave(bottomSheet.element).then(function() {\n        if (options.disableParentScroll) {\n          options.restoreScroll();\n          delete options.restoreScroll;\n        }\n\n        bottomSheet.cleanup();\n      });\n    }\n\n    /**\n     * BottomSheet class to apply bottom-sheet behavior to an element\n     */\n    function BottomSheet(element, parent) {\n      var deregister = $mdGesture.register(parent, 'drag', { horizontal: false });\n      parent.on('$md.dragstart', onDragStart)\n        .on('$md.drag', onDrag)\n        .on('$md.dragend', onDragEnd);\n\n      return {\n        element: element,\n        cleanup: function cleanup() {\n          deregister();\n          parent.off('$md.dragstart', onDragStart);\n          parent.off('$md.drag', onDrag);\n          parent.off('$md.dragend', onDragEnd);\n        }\n      };\n\n      function onDragStart(ev) {\n        // Disable transitions on transform so that it feels fast\n        element.css($mdConstant.CSS.TRANSITION_DURATION, '0ms');\n      }\n\n      function onDrag(ev) {\n        var transform = ev.pointer.distanceY;\n        if (transform < 5) {\n          // Slow down drag when trying to drag up, and stop after PADDING\n          transform = Math.max(-PADDING, transform / 2);\n        }\n        element.css($mdConstant.CSS.TRANSFORM, 'translate3d(0,' + (PADDING + transform) + 'px,0)');\n      }\n\n      function onDragEnd(ev) {\n        if (ev.pointer.distanceY > 0 &&\n            (ev.pointer.distanceY > 20 || Math.abs(ev.pointer.velocityY) > CLOSING_VELOCITY)) {\n          var distanceRemaining = element.prop('offsetHeight') - ev.pointer.distanceY;\n          var transitionDuration = Math.min(distanceRemaining / ev.pointer.velocityY * 0.75, 500);\n          element.css($mdConstant.CSS.TRANSITION_DURATION, transitionDuration + 'ms');\n          $mdUtil.nextTick($mdBottomSheet.cancel,true);\n        } else {\n          element.css($mdConstant.CSS.TRANSITION_DURATION, '');\n          element.css($mdConstant.CSS.TRANSFORM, '');\n        }\n      }\n    }\n\n  }\n\n}\n\n})(window, window.angular);"]}