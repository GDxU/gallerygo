{"version":3,"sources":["controller-bundle.js"],"names":[],"mappings":"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","file":"controller-bundle-compiled.js","sourcesContent":["// Copyright IBM Corp. 2015. All Rights Reserved.\n// Node module: loopback-getting-started-intermediate\n// This file is licensed under the MIT License.\n// License text available at https://opensource.org/licenses/MIT\n\nangular\n  .module('app')\n  .controller('AllReviewsController', ['$scope', 'Review', function ($scope, Review) {\n    $scope.reviews = Review.find({\n      filter: {\n        include: [\n          'coffeeShop',\n          'reviewer'\n        ]\n      }\n    });\n  }])\n  .controller('AddReviewController', ['$scope', 'CoffeeShop', 'Review',\n    '$state', function ($scope, CoffeeShop, Review, $state) {\n      $scope.action = 'Add';\n      $scope.coffeeShops = [];\n      $scope.selectedShop;\n      $scope.review = {};\n      $scope.isDisabled = false;\n\n      CoffeeShop\n        .find()\n        .$promise\n        .then(function (coffeeShops) {\n          $scope.coffeeShops = coffeeShops;\n          $scope.selectedShop = $scope.selectedShop || coffeeShops[0];\n        });\n\n      $scope.submitForm = function () {\n        Review\n          .create({\n            rating: $scope.review.rating,\n            comments: $scope.review.comments,\n            coffeeShopId: $scope.selectedShop.id\n          })\n          .$promise\n          .then(function () {\n            $state.go('all-reviews');\n          });\n      };\n    }])\n  .controller('DeleteReviewController', ['$scope', 'Review', '$state', '$stateParams',\n    function ($scope, Review, $state, $stateParams) {\n      Review\n        .deleteById({id: $stateParams.id})\n        .$promise\n        .then(function () {\n          $state.go('my-reviews');\n        });\n    }])\n  .controller('EditReviewController', ['$scope', '$q', 'CoffeeShop', 'Review',\n    '$stateParams', '$state', function ($scope, $q, CoffeeShop, Review,\n                                        $stateParams, $state) {\n\n      $scope.action = 'Edit';\n      $scope.coffeeShops = [];\n      $scope.selectedShop;\n      $scope.review = {};\n      $scope.isDisabled = true;\n\n      $q\n        .all([\n          CoffeeShop.find().$promise,\n          Review.findById({id: $stateParams.id}).$promise\n        ])\n        .then(function (data) {\n          var coffeeShops = $scope.coffeeShops = data[0];\n          $scope.review = data[1];\n          $scope.selectedShop;\n\n          var selectedShopIndex = coffeeShops\n            .map(function (coffeeShop) {\n              return coffeeShop.id;\n            })\n            .indexOf($scope.review.coffeeShopId);\n          $scope.selectedShop = coffeeShops[selectedShopIndex];\n        });\n\n      $scope.submitForm = function () {\n        $scope.review.coffeeShopId = $scope.selectedShop.id;\n        $scope.review\n          .$save()\n          .then(function (review) {\n            $state.go('all-reviews');\n          });\n      };\n    }])\n  .controller('MyReviewsController', ['$scope', 'Review', '$rootScope',\n    function ($scope, Review, $rootScope) {\n      $scope.reviews = Review.find({\n        filter: {\n          where: {\n            publisherId: $rootScope.currentUser.id\n          },\n          include: [\n            'coffeeShop',\n            'reviewer'\n          ]\n        }\n      });\n    }]);\n"]}